**Дата:** 22 октября 2024 г.

**Статус:** Принято

**Контекст:**

Система обрабатывает персональные данные пользователей и должна поддерживать высокую доступность (AVA01), а также быть надежной с возможностью восстановления после сбоев (DUR04). В соответствии с нефункциональными требованиями к надежности системы (DUR03), необходимо обеспечить ежедневное резервное копирование данных, а также механизм автоматического восстановления после сбоев. Резервные копии данных должны храниться в защищенных хранилищах, и должен быть реализован механизм быстрого восстановления как данных, так и конфигурации системы.

**Решение:**

1. **Резервное копирование**:
   - Ежедневный бэкап данных (база данных, конфигурации, логи) с хранением в зашифрованном виде на удаленных серверах. Полные копии хранятся 30 дней.

2. **Восстановление данных**:
   - Восстановление из последней копии при падении системы. Процесс автоматизирован, время восстановления — до 2 часов.

3. **Мониторинг и оповещения**:
   - Автоматические уведомления при сбоях (MON01), быстрая реакция на инциденты через системы оповещения (PagerDuty, Zabbix).

4. **Failover**:
   - Geo-репликация данных и автоматическое переключение на резервные ресурсы в случае отказа.

**Альтернативы**:

Использование только локальных резервных копий без geo-репликации увеличивает риск полной потери данных в случае катастрофы, что неприемлемо для данной системы.

**Обоснование:**
Это решение выбрано в силу соответствия требованию к надежности системы (DUR03) и необходимости минимизировать время восстановления. Geo-репликация данных и использование резервных дата-центров значительно снижают вероятность потери данных и обеспечивают восстановление системы в случае катастрофического сбоя.

**Последствия:**

Положительные:
1. Минимизация потерь данных.
2. Быстрое восстановление системы после сбоев.
3. Соответствие требованиям к безопасности данных.

Отрицательные:
1. Увеличенные затраты на инфраструктуру и резервные ресурсы (резервные сервера, дата-центры, средства мониторинга).
2. Требуется настройка сложных процессов автоматизации восстановления и резервного копирования.
